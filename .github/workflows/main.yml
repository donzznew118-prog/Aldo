name: Termux Ready VPS

on: workflow_dispatch

jobs:
  vps:
    runs-on: ubuntu-latest
    timeout-minutes: 360
    
    steps:
    - name: Start Tmate Session
      uses: mxschmitt/action-tmate@v3
      with:
        limit-access-to-actor: false
        
    - name: Setup Ubuntu in Background
      run: |
        # Install Docker untuk Ubuntu container
        sudo apt-get update
        sudo apt-get install -y docker.io
        
        # Run Ubuntu container
        sudo docker run -d --name=ubuntu-vps ubuntu:22.04 sleep infinity
        
        # Setup container
        sudo docker exec ubuntu-vps bash -c "
        apt-get update
        apt-get install -y curl wget sudo
        useradd -m aldo
        echo 'aldo:aldo123' | chpasswd
        "
        
        echo "âœ… Ubuntu container ready"
        echo "Access via tmate session above"
        
    - name: Display Instructions
      run: |
        echo ""
        echo "========================================"
        echo "ðŸ“± HOW TO ACCESS FROM TERMUX:"
        echo "========================================"
        echo ""
        echo "1. ðŸ“² Open tmate link in browser"
        echo "2. ðŸ”— Copy the SSH command"
        echo "3. ðŸ“± Paste in Termux"
        echo ""
        echo "ðŸ”§ ONCE CONNECTED:"
        echo "   Access Ubuntu container:"
        echo "   sudo docker exec -it ubuntu-vps bash"
        echo ""
        echo "   Login as aldo in container:"
        echo "   sudo docker exec -it ubuntu-vps su - aldo"
        echo "   Password: aldo123"
        echo ""
        echo "========================================"
